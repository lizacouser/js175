extends layout

block main
  section#tests
    header
      h2= student.name
      ul
        if student.size() > 0 && !student.isDone()
          li
            form.complete_all(action=`/students/${student.id}/complete_all`
                              method="post")
              button.check(type="submit") Complete All
        li
          form(action=`/students/${student.id}/edit` method="get")
            button.edit(type="submit") Edit Student

        if showAll
          li
            form(action=`/students/${student.id}/show_current` method="post")
              button(type="submit") Display Current Test Pack Only
        else
          li
            form(action=`/students/${student.id}/show_all` method="post")
              button(type="submit") Display All Test Packs


    ul
      each test in tests
        if student.currentTestPack === test.testPack || showAll
          li(class=test.isDone() ? "done" : "")
            form.check(action=`/students/${student.id}/tests/${test.id}/toggle` method="post")
              input(type="hidden" name="done" value=!test.isDone())
              if !test.isDone()
                if test.testPack.includes("SAT")
                  input(type="number"
                      id="verbalScore"
                      name="verbalScore"
                      placeholder="verbal"
                      value=verbalScore)
                  input(type="number"
                      id="mathScore"
                      name="mathScore"
                      placeholder="math"
                      value=mathScore)
                else if test.testPack.includes("ACT")
                  input(type="number"
                      id="englishScore"
                      name="englishScore"
                      placeholder="english"
                      value=englishScore)
                  input(type="number"
                      id="ACTMathScore"
                      name="ACTMathScore"
                      placeholder="math"
                      value=ACTMathScore)
                  input(type="number"
                      id="readingScore"
                      name="readingScore"
                      placeholder="reading"
                      value=readingScore)
                  input(type="number"
                      id="scienceScore"
                      name="scienceScore"
                      placeholder="science"
                      value=scienceScore)
                input(type="checkbox" id="projected" name="projected" value="Projected")
                label(for="projected") Projected 
                input(type="checkbox" id="mock" name="mock" value="Mock")
                label(for="mock") Mock
              button Done
            br
            br
            h3= test.title
            if test.getScore()
              if test.isMock
                p MOCK
              if test.isProjectedScore
                p *#{test.logScore()}
              else
                p= test.logScore() 

    form(action=`/students/${student.id}/tests` method="post")
      fieldset.actions
        button Add test pack

    form(action=`/students/${student.id}/remove_tests` method="post")
      fieldset.actions
        button Remove test pack

block headerLinks
  .actions
    a.student(href="/students") All Students
