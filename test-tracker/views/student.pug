extends layout

block main
  section#tests
    header
      h2= student.name
      ul
        if student.size() > 0 && !student.isDone()
          li
            form.complete_all(action=`/students/${student.id}/complete_all`
                              method="post")
              button.check(type="submit") Complete All
        li
          form(action=`/students/${student.id}/edit` method="get")
            button.edit(type="submit") Edit Student

        if showAll
          li
            form(action=`/students/${student.id}/show_current` method="post")
              button(type="submit") Display Current Test Pack Only
        else
          li
            form(action=`/students/${student.id}/show_all` method="post")
              button(type="submit") Display All Test Packs


    ul
      each test in tests
        if student.currentTestPack === test.testPack || showAll
          li(class=test.isDone() ? "done" : "")
            h3= test.title
            if test.getScore()
              p= test.getScore().toString()
            form.check(action=`/students/${student.id}/tests/${test.id}/toggle` method="post")
              input(type="hidden" name="done" value=!test.isDone())
              if !test.isDone()
                if test.isSAT()
                  input(type="number"
                      id="SATVerbal"
                      name="SATVerbal"
                      placeholder="verbal"
                      value=SATVerbal)
                  input(type="number"
                      id="SATMath"
                      name="SATMath"
                      placeholder="math"
                      value=SATMath)
                else if test.isACT()
                  input(type="number"
                      id="ACTEnglish"
                      name="ACTEnglish"
                      placeholder="english"
                      value=ACTEnglish)
                  input(type="number"
                      id="ACTMath"
                      name="ACTMath"
                      placeholder="math"
                      value=ACTMath)
                  input(type="number"
                      id="ACTReading"
                      name="ACTReading"
                      placeholder="reading"
                      value=ACTReading)
                  input(type="number"
                      id="ACTScience"
                      name="ACTScience"
                      placeholder="science"
                      value=ACTScience)
                input(type="checkbox" id="projected" name="projected" value="Projected")
                label(for="projected") Projected 
                input(type="checkbox" id="mock" name="mock" value="Mock")
                label(for="mock") Mock
              button Done
            br
            br

    form(action=`/students/${student.id}/tests` method="post")
      fieldset.actions
        button Add test pack

    form(action=`/students/${student.id}/remove_tests` method="post")
      fieldset.actions
        button Remove test pack

block headerLinks
  .actions
    a.student(href="/students") All Students
